function getBodyWidth(){bodyWidth=document.body.offsetWidth;bodyWidth<=520?sizeScreen="mobile":bodyWidth<=1024?sizeScreen="tablette":sizeScreen="desktop";return sizeScreen}function changeImage(e,t){var n=getBodyWidth(),r=document.getElementById(t),i=r.getAttribute("src"),s=e.length+1,o=i.length;t=="indice-found"?newSrcImage=i.slice(0,7+s)+""+n+"-indice.svg":newSrcImage=i.slice(0,7+s)+""+n+".svg";r.setAttribute("src",newSrcImage)}function changeSVG(e){getBodyWidth();newSrcSVG="images/"+e+"-"+sizeScreen+".html";makeRequest(newSrcSVG);loadSVG++}function findIndice(){indice.addEventListener("click",function(){if(screenStep.className.length>12)if(screenStep.classList.contains("step-hidden-narration")){screenStep.classList.remove("step-hidden-narration");document.getElementById("narration").classList.remove("before")}else{screenStep.classList.remove("step-hidden-help");document.getElementById("help").classList.remove("before")}document.getElementById("bravo").style.display="block";indice.getAttribute("class")==""&&indice.setAttribute("class","shine");ctIndice=1;resetZoom(viewport);clearHandlers(root)})}function hideChapterBtn(){chapterBtn.classList.add("hidden");changeSVG(page);changeImage(page,id);ctChapter++;indice=document.getElementById("indice");screenStep.classList.add("step-hidden-narration");document.getElementById("narration").classList.add("before");getBodyWidth()=="mobile"&&(document.getElementById("narration-btn").innerHTML="<span>voir</span>");setTimeout(findIndice,1e3);closeIndice()}function togglePanel(e){document.getElementById(e+"-btn").addEventListener("click",function(){document.getElementById(e).classList.contains("before")?setupHandlers(root):clearHandlers(root);this.classList.toggle("step-hidden-"+e+"-btn");screenStep.classList.toggle("step-hidden-"+e);document.getElementById(e).classList.toggle("before");getBodyWidth()=="mobile"&&(document.getElementById(e).classList.contains("before")?document.getElementById(e+"-btn").innerHTML="<span>voir</span>":e=="narration"?document.getElementById(e+"-btn").innerHTML="<span>Lire</span>":document.getElementById(e+"-btn").innerHTML="<span>Besoin d'aide?</span>")})}function toggleDropdown(){var e=document.getElementById("help");[].forEach.call(e.getElementsByClassName("help-list"),function(e){e.addEventListener("click",function(){e.parentNode.getElementsByClassName("dropdown")[0].classList.toggle("dropdown-hidden");e.classList.toggle("active");e.getAttribute("id")=="help-indice"&&(indice.getAttribute("class")==""?indice.setAttribute("class","shine"):indice.setAttribute("class",""))})})}function responsiveAlert(){var e=document.getElementById("alert");e.className.slice(6,e.className.length)==getBodyWidth()?e.innerHTML="Bien, maintenant tu es au bon endroit. Tu peux cliquer n'importe où pour continuer.":e.innerHTML="Ah, non, ce n'est pas encore la bonne taille"}function responsiveAlertHome(){var e=document.getElementById("alert");if(e.className.slice(6,e.className.length)==getBodyWidth()){e.innerHTML="Bien, pour commencer, clique n’importe où dans la page";welcome.addEventListener("click",function(){this.style.display="none";this.innerHTML=""})}else e.innerHTML="Ah, non, ce n'est pas encore la bonne taille"}function closeIndice(){document.getElementById("close").addEventListener("click",function(e){e.preventDefault();document.getElementById("bravo").style.display="none";document.getElementById("resize").classList.remove("hidden")})}function checkInactivity(){function t(){screenStep.className.length<12&&document.getElementById("help-zoom").classList.remove("hidden");[].forEach.call(document.getElementsByClassName("toggle"),function(e){e.classList.add("hover")});ctInactivity++}function n(){document.getElementById("help-zoom").classList.add("hidden");[].forEach.call(document.getElementsByClassName("toggle"),function(e){e.classList.remove("hover")})}function r(){n();clearTimeout(e);if(ctIndice==0)switch(ctInactivity){case 0:e=setTimeout(t,3e3);break;case 1:case 2:e=setTimeout(t,7e3);break;default:}}var e;window.onload=r;document.onmousemove=r;document.onkeypress=r}function displayMobileTexte(){[].forEach.call(document.getElementsByClassName("texte"),function(e){e.classList.contains("tactile-only")==0?e.classList.add("hidden"):e.classList.remove("hidden")})}function createUrl(){getBodyWidth();var e=window.location.pathname.split("?")[0],t=e+"?oldSizeScreen="+sizeScreen;return t}function sendUrl(e){var t=document.getElementById(e).elements,n="";url=document.getElementById(e).action;for(var r=0;r<t.length;r++){n+=t[r].name+"="+encodeURIComponent(t[r].value)+"&";if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest;xmlhttp.overrideMimeType&&xmlhttp.overrideMimeType("text/xml")}else if(window.ActiveXObject)try{xmlhttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}}xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){if(xmlhttp.responseText=="send"){document.getElementById("fake-thanks").innerHTML="Voilà, tu peux partir tranquille";document.getElementById("email").value=""}}else{document.getElementById("fake-thanks").innerHTML="Remplis le champ mail (avec une adresse valide)";document.getElementById("email").value=""}};xmlhttp.open("POST",url,!0);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send(n);return xmlhttp.responseText}function makeRequest(e){var t=!1;if(window.XMLHttpRequest){t=new XMLHttpRequest;t.overrideMimeType&&t.overrideMimeType("text/xml")}else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}if(!t){alert("Abandon :( Impossible de créer une instance XMLHTTP");return!1}t.onreadystatechange=function(){injectContent(t)};t.open("GET",e,!0);t.send(null)}function injectContent(e){if(e.readyState==4&&e.status==200){svg.innerHTML=e.responseText;indice=document.getElementById("indice");root=document.getElementById("svgCanvas");viewport=root.getElementById("viewport");setTimeout(findIndice,1e3);resetZoom(viewport)}}function resetZoom(e){if(ctIndice>0){var t="matrix(1,0,0,1,0,0)";e.setAttribute("transform",t)}else e.addEventListener("dblclick",function(){var t="matrix(1,0,0,1,0,0)";e.setAttribute("transform",t)})}var chapterBtn=document.getElementsByClassName("chapter")[0],bodyWidth=document.body.offsetWidth,screenStep=document.getElementsByClassName("screen")[0],sizeScreen="mobile",root,state="none",svgRoot=null,stateTarget,stateOrigin,stateTf,loadSVG=0;ctIndice=0;if(document.body.getAttribute("id")=="home"||document.body.getAttribute("id")=="rtfm"){var page=document.body.getAttribute("id"),id="illu",welcome=document.getElementById("welcome");changeImage(page,id);welcome.innerHTML==""?welcome.style.display="none":getBodyWidth()=="desktop"&&welcome.addEventListener("click",function(){this.style.display="none";this.innerHTML=""});window.onresize=function(){welcome.innerHTML!=""&&responsiveAlertHome();return changeImage(page,id)}}if(document.body.getAttribute("id")=="rtfm"){function displayResize(){sizeScreen!="mobile"&&document.getElementById("resize").classList.remove("hidden")}setTimeout(displayResize,7e3)}if(document.body.getAttribute("id").slice(0,4)=="step"||document.readyState=="complete"){var image=document.getElementById("illu"),svg=document.getElementsByClassName("illu")[0],page=document.body.getAttribute("id"),id="indice-found",url=document.getElementById("url"),welcome=document.getElementById("welcome"),ctChapter=0;if(welcome.innerHTML==""){welcome.style.display="none";setTimeout(hideChapterBtn,2e3)}else welcome.addEventListener("click",function(){this.style.display="none";this.innerHTML="";setTimeout(hideChapterBtn,2e3)});document.body.className=="previous"&&displayMobileTexte();chapterBtn.addEventListener("click",hideChapterBtn);url.setAttribute("value",createUrl());togglePanel("narration");togglePanel("help");setTimeout(toggleDropdown,500);var ctInactivity=0;checkInactivity();window.onresize=function(){welcome.innerHTML!=""&&responsiveAlert();if(sizeScreen!=getBodyWidth()){window.location=window.location.pathname.split("?")[0];changeImage(page,id);if(ctChapter>0)return changeSVG(page);url.setAttribute("value",createUrl())}};document.getElementById("submit-quit").addEventListener("click",function(e){e.preventDefault();sendUrl("send-url")})};